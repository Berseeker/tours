function dselectUpdate(e,t,l){let n=e.dataset.dselectValue,s=e.closest(`.${t}`).previousElementSibling,i=s.nextElementSibling.getElementsByClassName(l)[0],o=s.nextElementSibling.querySelector("input");s.multiple?Array.from(s.options).filter(e=>e.value===n)[0].selected=!0:s.value=n,s.multiple&&i.click(),s.dispatchEvent(new Event("change")),i.focus(),o&&(o.value="")}function dselectRemoveTag(e,t,l){let n=e.parentNode.dataset.dselectValue,s=e.closest(`.${t}`).previousElementSibling,i=s.nextElementSibling.getElementsByClassName(l)[0],o=s.nextElementSibling.querySelector("input");Array.from(s.options).filter(e=>e.value===n)[0].selected=!1,s.dispatchEvent(new Event("change")),i.click(),o&&(o.value="")}function dselectSearch(e,t,l,n,s){let i=t.value.toLowerCase().trim(),o=t.nextElementSibling,a=o.querySelectorAll(".dropdown-header"),c=o.querySelectorAll(".dropdown-item"),r=o.nextElementSibling;for(let d of(a.forEach(e=>e.classList.add("d-none")),c))if(d.textContent.toLowerCase().indexOf(i)>-1){d.classList.remove("d-none");let u=d;for(;u=u.previousElementSibling;)if(u.classList.contains("dropdown-header")){u.classList.remove("d-none");break}}else d.classList.add("d-none");if(Array.from(c).filter(e=>!e.classList.contains("d-none")&&!e.hasAttribute("hidden")).length<1){if(r.classList.remove("d-none"),o.classList.add("d-none"),s&&(r.innerHTML=`Press Enter to add "<strong>${t.value}</strong>"`,"Enter"===e.key)){let p=t.closest(`.${l}`).previousElementSibling,m=p.nextElementSibling.getElementsByClassName(n)[0];p.insertAdjacentHTML("afterbegin",`<option value="${t.value}" selected>${t.value}</option>`),p.dispatchEvent(new Event("change")),t.value="",t.dispatchEvent(new Event("keyup")),m.click(),m.focus()}}else r.classList.add("d-none"),o.classList.remove("d-none")}function dselectClear(e,t){let l=e.closest(`.${t}`).previousElementSibling;Array.from(l.options).forEach(e=>e.selected=!1),l.dispatchEvent(new Event("change"))}function dselect(e,t={}){e.style.display="none";let l="dselect-wrapper",n="dselect-placeholder",s="",i=p("search")||t.search||!1,o=p("creatable")||t.creatable||!1,a=p("clearable")||t.clearable||!1,c=e.dataset.dselectMaxHeight||t.maxHeight||"360px",r=e.dataset.dselectSize||t.size||s;r=""!==r?` form-select-${r}`:"";let d=`form-select${r}`,u=i?`<input onkeydown="return event.key !== 'Enter'" onkeyup="dselectSearch(event, this, '${l}', '${d}', ${o})" type="text" class="form-control" placeholder="Search" autofocus>`:"";function p(t){let l=`data-dselect-${t}`;return e.hasAttribute(l)?"true"===e.getAttribute(l).toLowerCase():null}function m(e){return""===e.getAttribute("value")}function f(e,t){if(t){let s=Array.from(e).filter(e=>e.selected&&!m(e)),i=Array.from(e).filter(e=>m(e)),o=[];if(0===s.length){let a=i.length?i[0].textContent:"&nbsp;";o.push(`<span class="${n}">${a}</span>`)}else for(let c of s)o.push(`
            <div class="dselect-tag" data-dselect-value="${c.value}">
              ${c.text}
              <svg onclick="dselectRemoveTag(this, '${l}', '${d}')" class="dselect-tag-remove" width="14" height="14" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/></svg>
            </div>
          `);return o.join("")}{let r=e[e.selectedIndex];return m(r)?`<span class="${n}">${r.innerHTML}</span>`:r.innerHTML}}function v(e){let t=e[e.selectedIndex];return m(t)?"":t.textContent}function h(t){let n=[];for(let s of t)if("OPTGROUP"===s.tagName)n.push(`<h6 class="dropdown-header">${s.getAttribute("label")}</h6>`);else{let i=m(s)?" hidden":"",o=s.selected?" active":"",a=e.multiple&&s.selected?" disabled":"",c=s.value,r=s.textContent;n.push(`<button${i} class="dropdown-item${o}" data-dselect-value="${c}" type="button" onclick="dselectUpdate(this, '${l}', '${d}')"${a}>${r}</button>`)}return n.join("")}!function t(){let n=e.multiple?' data-bs-auto-close="outside"':"",s=Array.from(e.classList).filter(e=>"form-select"!==e&&"form-select-sm"!==e&&"form-select-lg"!==e).join(" "),i=a&&!e.multiple?`
    <button type="button" class="btn dselect-clear" title="Clear selection" onclick="dselectClear(this, '${l}')">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" fill="none">
        <path d="M13 1L0.999999 13" stroke-width="2" stroke="currentColor"></path>
        <path d="M1 1L13 13" stroke-width="2" stroke="currentColor"></path>
      </svg>
    </button>
    `:"",o=`
    <div class="dropdown ${l} ${s}">
      <button class="${d} ${!e.multiple&&a?"dselect-clearable":""}" data-dselect-text="${!e.multiple&&v(e.options)}" type="button" data-bs-toggle="dropdown" data-bs-display="static" aria-expanded="false"${n}>
        ${f(e.options,e.multiple)}
      </button>
      <div class="dropdown-menu">
        <div class="d-flex flex-column">
          ${u}
          <div class="dselect-items" style="max-height:${c};overflow:auto">
            ${h(e.querySelectorAll("*"))}
          </div>
          <div class="dselect-no-results d-none">No results found</div>
        </div>
      </div>
      ${i}
    </div>
    `;e.nextElementSibling&&e.nextElementSibling.classList&&e.nextElementSibling.classList.contains(l)&&e.nextElementSibling.remove(),e.insertAdjacentHTML("afterend",o)}(),e.addEventListener("change",function t(){let l=e.nextElementSibling,n=l.getElementsByClassName(d)[0],s=l.getElementsByClassName("dselect-items")[0];n.innerHTML=f(e.options,e.multiple),s.innerHTML=h(e.querySelectorAll("*")),e.multiple||(n.dataset.dselectText=v(e.options))})}